(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{174:function(e,t,s){},175:function(e,t,s){},176:function(e,t,s){},177:function(e,t,s){},178:function(e,t,s){},179:function(e,t,s){},180:function(e,t,s){},181:function(e,t,s){},182:function(e,t,s){},183:function(e,t,s){},184:function(e,t,s){"use strict";s.r(t);var n=s(3),r=s.n(n),a=s(61),o=s.n(a),i=(s(69),s(0)),c=s(2),u=s.n(c);class l extends r.a.PureComponent{constructor(e){super(e),this.state={editing:!1}}render(){const e=`${Object(i.format)(this.props.start,"h:mma")}-${Object(i.format)(this.props.end,"h:mma")}`;return r.a.createElement("div",{id:`${this.props.id}-drag`,key:this.props.start.toString()+this.props.end.toString(),draggable:!0,onDrag:this.props.onEventDrag.bind(this,this.props.id),onDrop:this.props.onEventDrop.bind(this),onDragStart:this.props.onEventDragStart.bind(this),onDragOver:this.props.onEventDragOver.bind(this),style:{height:"100%"}},r.a.createElement("div",{onDoubleClick:e=>this.setState({editing:!0}),style:{height:"100%"}},this.state.editing&&r.a.createElement("div",null,"hello "),r.a.createElement("div",null,e)))}}l.propTypes={id:u.a.string.isRequired,start:u.a.instanceOf(Date).isRequired,end:u.a.instanceOf(Date).isRequired,onEventDrag:u.a.func.isRequired,onEventDrop:u.a.func.isRequired,onEventDragStart:u.a.func.isRequired,onEventDragOver:u.a.func.isRequired,onEventResize:u.a.func.isRequired};s(174);class d extends r.a.PureComponent{getHourBarStyle(){return{display:"grid",gridTemplateRows:`repeat(${this.props.endHour-this.props.startHour}, 1fr)`,height:"100%"}}getHourStyle(e){return{gridRow:`${e} / ${e+1}`}}getHours(){const e=[],t=new Date;t.setMinutes(0,0,0);for(let s=this.props.startHour;s<this.props.endHour;s++){t.setHours(s);const n=Object(i.format)(t,"ha");e.push(r.a.createElement(r.a.Fragment,{key:n},r.a.createElement("div",{key:n,style:this.getHourStyle(s-this.props.startHour+2),className:"hour-step-container"},r.a.createElement("div",null,n))))}return e}render(){return r.a.createElement(r.a.Fragment,null,this.getHours())}}d.propTypes={startHour:u.a.number.isRequired,endHour:u.a.number.isRequired};s(175),s(176),s(177);const p=8,h=20;class v extends r.a.PureComponent{getDayLines(){const e=[];for(let t=0;t<this.props.numDays;t++)e.push(r.a.createElement("div",{key:t+"day-line",className:"day-line"}));return e}getDayStyle(){return{gridTemplateColumns:`repeat(${this.props.numDays}, 1fr)`}}render(){return r.a.createElement("div",{className:"day-layer",style:this.getDayStyle()},this.getDayLines())}}v.propTypes={numDays:u.a.number.isRequired},v.defaultProps={numDays:5};s(178);class g extends r.a.PureComponent{getHourLines(){const e=[];for(let t=this.props.startHour;t<this.props.endHour;t++){const s=`${t}:00`;e.push(r.a.createElement("div",{key:s+"hour-line",className:"hour-line"}))}return e}getHourLinesStyle(){return{gridTemplateRows:`repeat(${this.props.endHour-this.props.startHour}, 1fr)`}}render(){return r.a.createElement("div",{className:"hour-layer",style:this.getHourLinesStyle()},this.getHourLines())}}function m(e,t,s,n){return y(e,e.clientX,e.clientY,t,s,n)}function y(e,t,s,n,r,a){const o=document.getElementById("event-calendar").getBoundingClientRect(),c=t-o.left,u=s-o.top;if(c<0||u<0)return void console.error("Somehow could not decode event, event is"+e);const l=a-r,d=Math.floor(u/o.height*l*12),p=Math.floor(d/12),h=d%12*5,v=Math.floor(c/o.width*n);return Object(i.setHours)(Object(i.setMinutes)(Object(i.setSeconds)(Object(i.setDay)(new Date,v+1),0),h),p+r)}g.propTypes={startHour:u.a.number.isRequired,endHour:u.a.number.isRequired},g.defaultProps={startHour:p,endHour:h};s(179);class D extends r.a.PureComponent{render(){return r.a.createElement("div",{className:"input-layer",onDoubleClick:this.props.onDoubleClick,onDrop:this.props.onEventDrop,onDragOver:this.props.onEventDragOver})}}D.defaultProps={onDoubleClick:()=>{},onEventDrop:()=>{},onEventDragOver:e=>e.preventDefault()},D.propTypes={onDoubleClick:u.a.func,onEventDrop:u.a.func};s(180);var E=s(62),b=s.n(E);s(181);const f="end",O="start";class j extends r.a.PureComponent{startResize(e){this.props.onResize(e,O)}endResize(e){this.props.onResize(e,f)}getStartResize(){return this.props.active?r.a.createElement("div",{draggable:!0,key:this.props.id+"resize-start",className:"resize-widget resize-widget-start",onDragOver:e=>e.preventDefault(),onDrag:this.startResize.bind(this)}):null}getEndResize(){return this.props.active?r.a.createElement("div",{draggable:!0,key:this.props.id+"resize-end",className:"resize-widget resize-widget-end",onDragOver:e=>e.preventDefault(),onDrag:this.endResize.bind(this)}):null}render(){return r.a.createElement("div",{className:"resize-context"},this.getStartResize(),this.props.children,this.getEndResize())}}j.defaultProps={onResize:()=>{},active:!0,id:"test"},j.propTypes={onResize:u.a.func,active:u.a.bool,id:u.a.string};const H=5,C=5,R=60/C;class S extends r.a.PureComponent{getEventColumnStyle(e,t,s){let n=s+1;for(;n<t.length;n++){if(t[n].some(t=>this.isContainedBy(t,e)))return{gridColumn:`${s+1}/${n}`}}return{gridColumn:`${s+1}/${t.length+1}`}}getEventStyle(e,t,s){const n=e.start,r=e.end,a=this.getEventColumnStyle(e,t,s);return{gridRow:`${Math.floor((n.getHours()-this.props.startHour)*R)+Math.floor(n.getMinutes()/C)+1}/${Math.floor((r.getHours()-this.props.startHour)*R)+Math.floor(r.getMinutes()/C)+1}`,...a}}isContainedBy(e,t){return Object(i.isBefore)(t.start,e.start)&&Object(i.isBefore)(e.end,t.end)}getEventsByDays(){const e=new Array(H);for(let t of this.props.events){let s=Object(i.getDay)(t.start)-1;e[s]||(e[s]=[]),e[s].push(t)}return e}layoutEventsIntoColumns(e){let t=[];for(let s of e){let e=null;for(let n of t){if(0===n.length)break;if(n.every(e=>!this.isContainedBy(s,e))){e=n;break}}e?e.push(s):t.push([s])}return t}hydrateEvent(e){return Object.assign({},e,{key:e.start.toString()+e.end.toString(),onEventDrag:this.props.onEventDrag.bind(this),onEventDrop:this.props.onEventDrop.bind(this),onEventDragStart:this.props.onEventDragStart.bind(this),onEventDragOver:this.props.onEventDragOver.bind(this),onEventResize:(t,s)=>this.props.onEventResize(t,e.id,s)})}styleEventsInColumns(e){const t=[];for(let s=0;s<e.length;s++){const n=e[s];for(let a of n){const n=this.getEventStyle(a,e,s),o=b()(this.props.eventClassName,"event-wrapper"),i=this.hydrateEvent(a),c=this.props.getEvent(i);t.push(r.a.createElement("div",{key:a.id,style:n,className:o},r.a.createElement(j,{active:a.active,id:a.id,onResize:(e,t)=>this.props.onEventResize(e,a.id,t)},c)))}}return t}getDayStyle(e){const t=this.props.startHour;return{display:"grid",gridTemplateColumns:`repeat(${e}, ${100/e}%)`,gridTemplateRows:`repeat(${(this.props.endHour-t)*R}, 1fr)`}}sortEvents(e){return e.sort((e,t)=>{return Object(i.differenceInMinutes)(e.start,e.end)-Object(i.differenceInMinutes)(t.start,t.end)})}layoutEventsIntoDays(){const e=[];let t=this.getEventsByDays(),s=0;for(let n of t)if(s++,n){const t=this.sortEvents(n),a=this.layoutEventsIntoColumns(t);let o=this.styleEventsInColumns(a);const i=r.a.createElement("div",{key:s,style:this.getDayStyle(a.length)},o);e.push(i)}else e.push(r.a.createElement("div",{key:s}));return e}render(){return r.a.createElement(r.a.Fragment,null,this.layoutEventsIntoDays())}}S.propTypes={name:u.a.string.isRequired,eventClassName:u.a.string,getEvent:u.a.func,events:u.a.array.isRequired,startHour:u.a.number.isRequired,endHour:u.a.number.isRequired,numDays:u.a.number.isRequired,onEventDrag:u.a.func,onEventDrop:u.a.func,onEventResize:u.a.func,onEventDragStart:u.a.func,onEventDragOver:u.a.func},S.defaultProps={name:"test",eventClassName:"",getEvent:()=>{},events:[],startHour:p,endHour:h,numDays:5,onEventDrag:()=>{},onEventDrop:()=>{},onEventResize:()=>{},onEventDragStart:()=>{},onEventDragOver:()=>{}};class M extends r.a.PureComponent{onEventDrag(e,t){this.props.onEventDrag(t,e,this.props.name)}getEventCalendarStyle(){return{gridTemplateColumns:`repeat(${this.props.numDays}, minmax(20px, 1fr))`}}render(){const e=Object.assign({},this.props,{onEventDrag:this.onEventDrag.bind(this)}),t=r.a.createElement(S,e);return r.a.createElement("div",{style:this.getEventCalendarStyle(),className:"event-layer"},t)}}M.defaultProps={onEventDrag:()=>{},onEventResize:()=>{},onEventDrop:()=>{},onEventDragOver:e=>{e.stopPropagation(),e.preventDefault()},onEventDragStart:e=>{e.dataTransfer.setData("text",JSON.stringify({mouseY:e.clientY,id:e.target.id})),e.stopPropagation()}},M.propTypes={name:u.a.string.isRequired,eventClassName:u.a.string,events:u.a.array.isRequired,startHour:u.a.number.isRequired,endHour:u.a.number.isRequired,numDays:u.a.number.isRequired,onEventDrag:u.a.func,onEventDrop:u.a.func,onEventResize:u.a.func};const w="resize",k="drag";class z extends r.a.PureComponent{constructor(e){super(e),this.state={draggedEvent:null,dragType:null,dragLayer:null}}onCalendarClick(e){const t=m(e,this.props.numDays,this.props.startHour,this.props.endHour);this.props.onCalendarClick(t)}onEventDrag(e,t,s){this.setState({draggedEvent:t,dragType:k,dragLayer:s})}onEventDrop(e){if(this.state.dragType===k)try{const s=function(e,t,s,n){const r=JSON.parse(e.dataTransfer.getData("text")),a=document.getElementById(r.id);let o=e.clientY+a.getBoundingClientRect().top-r.mouseY;return y(e,e.clientX,o,t,s,n)}(e,this.props.numDays,this.props.startHour,this.props.endHour);this.state.draggedEvent&&s&&this.props.onEventDrop(this.state.draggedEvent,this.state.dragLayer,s)}catch(t){console.warn(t)}}onEventResize(e,t,s){this.setState({draggedEvent:t,dragType:w});const n=m(e,this.props.numDays,this.props.startHour,this.props.endHour);n&&this.props.onEventResize&&this.props.onEventResize(t,n,s),e.stopPropagation()}getEventCalendarWrapperStyle(){return{gridColumn:`2 / ${this.props.numDays+2}`,gridRow:`2 / ${this.props.endHour-this.props.startHour+2}`}}render(){const e=this.props.layers.map(e=>r.a.createElement(M,{key:e.name,eventClassName:e.eventClassName,getEvent:this.props.getEvent,name:e.name,events:e.events,startHour:this.props.startHour,endHour:this.props.endHour,numDays:this.props.numDays,onEventDrag:this.onEventDrag.bind(this),onEventDrop:this.onEventDrop.bind(this),onEventResize:this.onEventResize.bind(this)}));return r.a.createElement("div",{id:"event-calendar",className:"event-calendar",style:this.getEventCalendarWrapperStyle()},r.a.createElement(g,{startHour:this.props.startHour,endHour:this.props.endHour}),r.a.createElement(v,{numDays:this.props.numDays}),r.a.createElement(D,{onDoubleClick:this.onCalendarClick.bind(this),onEventDrop:this.onEventDrop.bind(this)}),e)}}z.propTypes={startHour:u.a.number,endHour:u.a.number,numDays:u.a.number,onEventDrop:u.a.func,onEventResize:u.a.func,onCalendarClick:u.a.func,layers:u.a.arrayOf(u.a.shape({name:u.a.string,events:u.a.arrayOf(u.a.object),eventClassName:u.a.string}))},z.defaultProps={startHour:p,endHour:h,numDays:5,onEventDrop:()=>{},onEventResize:()=>{},onCalendarClick:()=>{},layers:[]};s(182);class N extends r.a.PureComponent{getDayBarStyle(){return{gridTemplateColumns:`min-content repeat(${this.props.numDays}, 1fr)`}}getDayStyle(e){return{gridColumn:`${e} / ${e+1}`}}getDays(){const e=[];let t=Object(i.startOfWeek)(new Date,{weekStartsOn:1});for(let s=0;s<this.props.numDays;s++){const n=Object(i.format)(t,"ddd");t=Object(i.addDays)(t,1),e.push(r.a.createElement("div",{key:n,className:"day",style:this.getDayStyle(s+2)},n))}return e}render(){return r.a.createElement(r.a.Fragment,null,this.getDays())}}N.propTypes={numDays:u.a.number.isRequired};const T=7,$=5;class x extends r.a.PureComponent{constructor(e){super(e),this.state={numDays:e.workWeek?$:T}}getMinHour(){if(!this.props.layers)return p;let e=[].concat(...this.props.layers.map(e=>e.events)).map(e=>e.start.getHours());return Math.max(0,Math.min(...e)-1)}getMaxHour(){if(!this.props.layers)return h;let e=[].concat(...this.props.layers.map(e=>e.events)).map(e=>e.end.getHours());return Math.min(Math.max(...e)+1,24)}getWeekCalendarStyle(){return{gridTemplateRows:`min-content repeat(${this.getMaxHour()-this.getMinHour()}, 1fr)`,gridTemplateColumns:`min-content repeat(${this.state.numDays}, 1fr)`}}render(){return r.a.createElement("div",{style:this.getWeekCalendarStyle(),className:"wc-container"},r.a.createElement(N,{numDays:this.state.numDays}),r.a.createElement(d,{startHour:this.getMinHour(),endHour:this.getMaxHour()}),r.a.createElement(z,{startHour:this.getMinHour(),onEventDrop:this.props.onEventDrop,onEventResize:this.props.onEventResize,onCalendarClick:this.props.onCalendarClick,getEvent:this.props.getEvent,endHour:this.getMaxHour(),numDays:this.state.numDays,layers:this.props.layers}))}}x.propTypes={workWeek:u.a.bool,layers:u.a.arrayOf(u.a.shape({name:u.a.string,events:u.a.arrayOf(u.a.object),eventClassName:u.a.string})),onCalendarClick:u.a.func,onEventDrop:u.a.func,onEventResize:u.a.func,getEvent:u.a.func},x.defaultProps={workWeek:!0,events:[],layers:[],onCalendarClick:()=>{},onEventDrop:()=>{},onEventResize:()=>{},getEvent:()=>r.a.createElement("div",null)};s(183);const q="event",P="preference";o.a.render(r.a.createElement("div",{style:{height:"100%",padding:"10em"}},r.a.createElement(class extends r.a.PureComponent{getEvent(e){return r.a.createElement(l,e)}constructor(e){super(e),this.state={numCreated:0,events:[{id:"event1",start:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,8),0),0),0),2),end:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,20),0),0),0),2)},{id:"event2",start:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,10),30),0),0),3),end:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,12),50),0),0),3)},{id:"event3",start:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,16),20),0),0),5),end:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,20),30),0),0),5)},{id:"event4",start:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,5),20),0),0),5),end:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,7),30),0),0),5)},{id:"event5",start:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,11),0),0),0),1),end:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,12),20),0),0),1)},{id:"event6",start:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,22),0),0),0),3),end:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,23),20),0),0),3)}],preferences:[{id:"preference1",start:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,13),0),0),0),2),end:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,15),0),0),0),2)},{id:"preference2",start:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,5),30),0),0),3),end:Object(i.setDay)(Object(i.setMilliseconds)(Object(i.setSeconds)(Object(i.setMinutes)(Object(i.setHours)(new Date,7),50),0),0),3)}]}}onEventDrop(e,t,s){let n=q,r=this.state.events.filter(t=>t.id===e)[0];r||(r=this.state.preferences.filter(t=>t.id===e)[0],n=P);const a=Object(i.differenceInSeconds)(r.end,r.start),o=Object.assign({},r);if(o.start=s,o.end=Object(i.addSeconds)(s,a),o.start.getDay()===o.end.getDay())if(n===q){const t=this.state.events.filter(t=>t.id!==e);this.setState({events:[...t,o]})}else{const t=this.state.preferences.filter(t=>t.id!==e);this.setState({preferences:[...t,o]})}}onEventResize(e,t,s){let n=q,r=this.state.events.filter(t=>t.id===e)[0];r||(r=this.state.preferences.filter(t=>t.id===e)[0],n=P);const a=Object(i.addMinutes)(r.start,30),o=Object.assign({},r);if(o.start.getDay()===o.end.getDay()&&o.start.getDay()===t.getDay())if(s===f?o.end=Object(i.max)(a,t):s===O&&(o.start=t),n===q){const t=this.state.events.filter(t=>t.id!==e);this.setState({events:[...t,o]})}else{const t=this.state.preferences.filter(t=>t.id!==e);this.setState({preferences:[...t,o]})}}onCalendarClick(e){const t=e,s=Object(i.addHours)(e,1);if(t.getDay()!==s.getDay())return;const n={id:"created-event"+this.state.numCreated,start:t,end:s};this.setState({numCreated:this.state.numCreated+1,events:[...this.state.events,n]})}render(){const e=this.state.events,t=this.state.preferences,s=[{name:q,events:e,eventClassName:q},{name:P,events:t,eventClassName:P}];return r.a.createElement(x,{layers:s,getEvent:this.getEvent.bind(this),onCalendarClick:this.onCalendarClick.bind(this),onEventDrop:this.onEventDrop.bind(this),onEventResize:this.onEventResize.bind(this)})}},null)),document.getElementById("root"))},63:function(e,t,s){e.exports=s(184)},69:function(e,t,s){}},[[63,1,2]]]);
//# sourceMappingURL=main.0849d000.chunk.js.map